# Tables

(ref:Table1Caption) List of head dimensions for upper jaw length (L~UJ~), eye diameter (L~ED~), interorbital distance (L~ID~), snout length (L~SL~), post orbital to preoperculum distance (L~PP~) and post orbital head length (L~PO~) measurement descriptions and specification of caliper jaw placement.  Many follow the morphological measurements described in [@Shaw1997].  The matching images are found in Appendix A.
\ \
\ \ 

```{r table1, echo=FALSE}
     options(knitr.kable.NA = '')
     df   <-  read.csv(paste(path,"Table1.csv", sep=""), header=T)
     
     df$symbol  <-  c(paste("L", "\\textsubscript{UJ}", sep=''),
                      paste("L", "\\textsubscript{ED}", sep=''),
                      paste("L", "\\textsubscript{ID}", sep=''),
                      paste("L", "\\textsubscript{SL}", sep=''),
                      paste("L", "\\textsubscript{PP}", sep=''),
                      paste("L", "\\textsubscript{PO}", sep=''))
     df$Head.dimension  <- NULL
     df  <- df[,c(3,1,2)]
     names(df)  <- c("Head dimension","Head description","Caliper jaw position")
     

     # Change to names of my local images
     #df$Image = c(paste(graph_directory,'ca.png',sep=''),
      #            paste(graph_directory,'Figure2b.png',sep=''),
      #            paste(graph_directory,'Figure2c.png',sep=''),
      #            paste(graph_directory,'Figure2d.png',sep=''),
      #            paste(graph_directory,'Figure2e.png',sep=''),
      #            paste(graph_directory,'Figure2f.png',sep=''))
     
     # Add appropriate rmarkdown tagging
     #df$Image <- sprintf('![](%s){width=50px}', df$Image)
     
     kableExtra::kable(df, booktabs = TRUE, 
                       linesep = "", format = "latex",
                       escape = F, # allows textsuperscript latex
                       caption = "(ref:Table1Caption)") %>%
     
     
     kableExtra::kable_styling(font_size = 10, position = "left",latex_options = "hold_position") %>%
                       column_spec(1, width  = "1.9cm") %>%
                       column_spec(2, width  = "6.0cm") %>%
                       column_spec(3, width  = "7.5cm") %>%
                       row_spec(0, bold="true") %>%
                       row_spec(1,  hline_after = T) %>%
                       row_spec(2,  hline_after = T) %>%
                       row_spec(3,  hline_after = T) %>%
                       row_spec(4,  hline_after = T) %>%  
                       row_spec(5,  hline_after = T) 
```
\ \
\ \
\ \
(ref:Table2Caption) Primers used in the development of a genetic test for determining sablefish sex, developed by the Pacific Biological Station (PBS) Molecular Genetics Laboratory (MGL).
\ \
\ \
```{r table2,  results="asis",echo=FALSE, warning=FALSE, message=FALSE}

   dna <- read.csv(paste(path,'Table2.csv',sep=''),header=T)  # read from csv
   names(dna)<- c("Locus","Sequence","Fragment Size")
   
   kableExtra::kable(dna, booktabs = TRUE,
                     format = "latex",
                     caption = "(ref:Table2Caption)") %>%
   
   kableExtra::kable_styling(font_size = 10, position = "left",latex_options = "hold_position") %>%
                     row_spec(0, bold="true") 
   

```
\clearpage

(ref:Table3Caption) Summary of sablefish biological data collected during the 2016 experimental study. Tally of fork lengths (L~FL~), round weights (RW), upper jaw lengths (L~UJ~),  eye diameters (L~ED~), interorbital distances (L~ID~), snout lengths (L~SL~), post orbital to preoperculum distances (L~PP~), post orbital head lengths (L~PO~), females (F), males (M), sagittal otoliths and operculum clips (DNA) listed by survey.
\ \
\ \

```{r table3, results="asis",echo=FALSE, warning=FALSE, message=FALSE}

    sample <- paste("select  CASE WHEN TRIP_ID = 0 THEN 'Salmon' WHEN trip_id = 80378 THEN '2016 WCHG'  ",
                    " ELSE '2016 WCVI ' END AS Survey,  ",
                    " SUM(FL) AS FL, SUM(WR) AS WR, SUM(UJ) AS UJ, SUM(ED) AS ED, ",
                    " SUM(ID) AS ID, SUM(SL) AS SL, SUM(PP) AS PP, SUM(PH) AS PO, ",
                    " SUM(F) AS F,   SUM(M) AS M,   SUM(O)  AS Otoliths,  ",
                    " SUM(D) AS DNA, SUM(FL) AS Total  from    ",       
                    " (SELECT   TRIP_ID, CASE WHEN Fork_Length > 0 THEN 1 ELSE 0 END AS FL, ",
                    "  CASE WHEN Whole_Round_Weight > 0 THEN 1 ELSE 0 END AS WR, ",
                    "  CASE WHEN Upper_jaw_length > 0 THEN 1 ELSE 0 END AS UJ,   ",
                    "  CASE WHEN Eye_Diameter > 0 THEN 1 ELSE 0 END AS ED, ",
                    "  CASE WHEN InterOrbital_distance > 0 THEN 1 ELSE 0 END AS ID, ",
                    "  CASE WHEN Snout_length > 0 THEN 1 ELSE 0 END AS SL, ",
                    "  CASE WHEN Postorbital_Preoperculum > 0 THEN 1 ELSE 0 END AS PP, ",
                    "  CASE WHEN Post_orbital_Head_length > 0 THEN 1 ELSE 0 END AS PH, ",
                    "  CASE WHEN SPECIMEN_SEX_DESC = 'FEMALE' THEN 1 ELSE 0 END AS F, ",
                    "  CASE WHEN SPECIMEN_SEX_DESC = 'MALE' THEN 1 ELSE 0 END AS M, ",
                    "  CASE WHEN Otoliths_Collected = 'Y' THEN 1 ELSE 0 END AS O,  ",
                    "  CASE WHEN DNA_Collected = 'Y' THEN 1 ELSE 0 END AS D  ",
                    "  from dbo.Head_Measurements_Report) AS Samples ",
                    "  group by CASE WHEN TRIP_ID = 0 THEN 'Salmon' WHEN trip_id = 80378  ",
                    "  THEN '2016 WCHG' ELSE '2016 WCVI ' END", sep="")
   # samplecnt <-    GetSQLData(sample,"Sablefish")  # -- counts of biological samples
   # write.table(samplecnt , file = paste(path,"Table3.csv", sep=''), row.names=FALSE, na="", col.names=TRUE, sep=",")
   samplecnt <- read.csv(paste(path,'Table3.csv',sep=''),header=T)  # read from csv
   
   last.line  <-   c('Total', sum(samplecnt$FL), sum(samplecnt$RW),
                         sum(samplecnt$UJ), sum(samplecnt$ED),
                         sum(samplecnt$ID), sum(samplecnt$SL),
                         sum(samplecnt$PP), sum(samplecnt$PO),
                         sum(samplecnt$F),  sum(samplecnt$M),
                         sum(samplecnt$Otoliths), sum(samplecnt$DNA),sum(samplecnt$Total))
   samplecnt$Survey <- as.character(samplecnt$Survey)
   samplecnt        <- rbind(samplecnt, last.line)
   
   kableExtra::kable(samplecnt, booktabs = TRUE, 
                     col.names = c("Survey", "L\\textsubscript{FL}", "RW", 
                                   "L\\textsubscript{UJ}", "L\\textsubscript{ED}", 
                                   "L\\textsubscript{ID}", "L\\textsubscript{SL}", 
                                   "L\\textsubscript{PP}", "L\\textsubscript{PO}", 
                                   "F", "M", "Otoliths", "DNA", "Total"),
                     format = "latex", 
                     linesep = "",
                     row.names=FALSE,
                     escape = F, # allows textsuperscript latex
                     caption = "(ref:Table3Caption)") %>%
   
   kableExtra::kable_styling(font_size = 10, position = "left",latex_options = "hold_position") %>%
                     row_spec(0, bold="true")  %>%
                     row_spec(4, bold="true") %>%
                     row_spec(3, hline_after = T)
   
```
\ \
\ \
\ \
(ref:Table4Caption) Statistics associated with simple linear regressions using measurements (mm) of cranial lengths: upper jaw length (L~UJ~), eye diameter (L~ED~), interorbital distance (L~ID~), snout length (L~SL~), post orbital to preoperculum length (L~PP~) and post orbital head length (L~PO~) as predictors of the fork length (L~FL~) of 438 sablefish collected from research surveys in 2016.  All models were significant at P <0.001. 
\ \
\ \

```{r table4, echo=FALSE}

     head.stats$symbol  <-  c(paste("L", "\\textsubscript{UJ}", sep=''), paste("L", "\\textsubscript{UJ}", sep=''),
                              paste("L", "\\textsubscript{ED}", sep=''), paste("L", "\\textsubscript{ED}", sep=''),
                              paste("L", "\\textsubscript{ID}", sep=''), paste("L", "\\textsubscript{ID}", sep=''),
                              paste("L", "\\textsubscript{SL}", sep=''), paste("L", "\\textsubscript{SL}", sep=''),
                              paste("L", "\\textsubscript{PP}", sep=''), paste("L", "\\textsubscript{PP}", sep=''),
                              paste("L", "\\textsubscript{PO}", sep=''), paste("L", "\\textsubscript{PO}", sep=''))
     head.stats$name  <- NULL
     head.stats$measurement <- NULL
     head.stats  <- head.stats[,c(11,1,2,3,4,5,6,7,8,9,10)]
     head.stats$symbol <- cleanf(head.stats$symbol)  # remove duplicate names

     kableExtra::kable(head.stats, col.names = c("Cranial Measurement","Sex","N","Slope","SE","R\\textsuperscript{2}","r","Mean","SD","Mean","SD"),
                      booktabs = TRUE, 
                      linesep = "", row.names=FALSE, escape = F, # need escape to show superscript
                      align = c("l","l","c","c","c","c","c","c","c","c"),
                      format = "latex",  caption = "(ref:Table4Caption)") %>%

     add_header_above(c(" "=7, "Predictor"= 2, "Response L$_{LF}$" = 2), bold=T, escape = F) %>% 
     kableExtra::kable_styling(font_size = 10, position = "left",latex_options = "hold_position") %>%
                      row_spec(0, bold = "true") %>%
                      row_spec(c(2,4,6,8,10), hline_after = T) %>%
                      column_spec(1, width  = "2.2cm") %>%
                      column_spec(2, width  = "1.2cm") %>%
                      column_spec(3, width  = "0.7cm") %>%
                      column_spec(4, width  = "0.7cm") %>%
                      column_spec(5, width  = "0.7cm") %>%
                      column_spec(6, width  = "0.7cm") %>%
                      column_spec(7, width  = "0.8cm") %>%
                      column_spec(8, width  = "0.8cm") %>%
                      column_spec(9, width  = "0.8cm") %>%
                      column_spec(10, width = "0.8cm") %>%
                      column_spec(11, width = "0.8cm")
    
```
(ref:Table5Caption) Ease of use and repeatable five point ranking scale recorded by experienced samplers for each cranial measurement for the 2016 experimental study, where 5 = Great; 4 = Good; 3 = Moderate; 2 = Questionable; 1 = Poor. 

```{r table5, echo=FALSE}

#  Notes:  on each head dimension manual calipers for >15cm distances other metrics indicate if calipers were limited after >15 cm,  bilateral 
#   measurements were possible and if the measurement involved bone.

 options(knitr.kable.NA = '')

     repeatable   <-  read.csv(paste(path,"Table5.csv", sep=""), header=T)
     #table4[1,3] <-  lmR(lm(Fork_Length ~ Upper_jaw_length, data=hdUj))   # r value if needed 
     #table4[2,3] <-  lmR(lm(Fork_Length ~ Eye_Diameter, data=hdEd))
     #table4[3,3] <-  lmR(lm(Fork_Length ~ InterOrbital_Distance, data=hdId))
     #table4[4,3] <-  lmR(lm(Fork_Length ~ Snout_length, data=hdSl))
     #table4[5,3] <-  lmR(lm(Fork_Length ~ Postorbital_Preoperculum, data=hdPop))
     #table4[6,3] <-  lmR(lm(Fork_Length ~ Post_orbital_Head_length, data=hdPo))
     
     repeatable  <-  repeatable[,c(-2)] 
     repeatable$symbol  <-  c(paste("L", "\\textsubscript{UJ}", sep=''),
                              paste("L", "\\textsubscript{ED}", sep=''),
                              paste("L", "\\textsubscript{ID}", sep=''),
                              paste("L", "\\textsubscript{SL}", sep=''),
                              paste("L", "\\textsubscript{PP}", sep=''),
                              paste("L", "\\textsubscript{PO}", sep=''))
     repeatable$Measurement  <- NULL
     repeatable  <- repeatable[,c(7,1,2,3,4,5,6)]
     
     
     names(repeatable)  <- c("Head Dimension",    
                             "Ease of use", "Repeatable", 
                             "Caliper limitation", "Bilateral", 
                             "Bone",   "Considerations")
     
     kableExtra::kable(repeatable,
                     booktabs = TRUE,
                     linesep = "",
                     escape = F, # need escape to show superscript
                     align = c("c","c","c","c","c","c","l"),
                     format = "latex",  caption = "(ref:Table5Caption)") %>%
                     row_spec(1,  hline_after = T) %>%
                     row_spec(2,  hline_after = T) %>%
                     row_spec(3,  hline_after = T) %>%
                     row_spec(4,  hline_after = T) %>%
                     row_spec(5,  hline_after = T) %>%

     add_header_above(c(" "= 1, "5 Point Rank" = 2, "Measurement" = 3, " " = 1), bold=T) %>%   
             
     kableExtra::kable_styling(font_size = 10, position = "left") %>%
                      row_spec(0, bold="true") %>%
                      column_spec(1, width  = "1.4cm") %>%
                      column_spec(2, width  = "0.9cm") %>%
                      column_spec(3, width  = "1.7cm") %>%
                      column_spec(4, width  = "1.2cm") %>%
                      column_spec(5, width  = "1.7cm") %>%
                      column_spec(6, width  = "1.7cm") %>%
                      column_spec(7, width  = "4.6cm")        

```

```{r table6words, echo=FALSE}

sample99cnt <- read.csv(paste(path,'head_measurements_Seamount_Pilot.csv',sep=''),header=T)  # read from csv

cobb.count  <- nrow(sample99cnt[sample99cnt$White.bag.label=="COBB",])
eick.count  <- nrow(sample99cnt[sample99cnt$White.bag.label=="EICKELBERG",])

``` 

\ \
(ref:Table6Caption) Summary of sablefish biological data collected from the 2017 pilot study to Cobb (n=`r cobb.count`) and Eickelberg (n=`r eick.count`) seamounts, measured by three expert technicians using a standardized protocol for the 2017 pilot study.  Index of Average Error (IAE) % values are reported for each of the cranial lengths.   
\ \

```{r table6, echo=FALSE}


   samples.data <- read.csv(paste(path,'export.samples.csv',sep=''),header=T)  # read from csv created in the index.rmd
   IAE.value        <- c(IAE.UJ,IAE.ID,IAE.SL,IAE.PP)
   
#  separate out by sampler

   pilot.table <- as.data.frame(cbind(meas.name=c(     paste("L", "\\textsubscript{UJ}", sep=''),paste("L", "\\textsubscript{ID}", sep=''),
                                                       paste("L", "\\textsubscript{SL}", sep=''),paste("L", "\\textsubscript{PP}", sep='')) ,                          
                                   samplerA = c(       paste(min(sample99cnt$Upper.jaw.lengthA)," - ", max(sample99cnt$Upper.jaw.lengthA), sep=''),  
                                                       paste(min(sample99cnt$InterOrbital.DistanceA)," - ", max(sample99cnt$InterOrbital.DistanceA), sep=''),                                                       
                                                       paste(min(sample99cnt$Snout.lengthA)," - ", max(sample99cnt$Snout.lengthA), sep=''),
                                                       paste(min(sample99cnt$Post.orbital.to.PreoperculumA)," - ", max(sample99cnt$Post.orbital.to.PreoperculumA), sep='')) ,
                                   samplerB = c(       paste(min(sample99cnt$Upper.jaw.lengthB)," - ", max(sample99cnt$Upper.jaw.lengthB), sep=''),
                                                       paste(min(sample99cnt$InterOrbital.DistanceB)," - ", max(sample99cnt$InterOrbital.DistanceB), sep=''),                                                       
                                                       paste(min(sample99cnt$Snout.lengthB)," - ", max(sample99cnt$Snout.lengthB), sep=''),
                                                       paste(min(sample99cnt$Post.orbital.to.PreoperculumB)," - ", max(sample99cnt$Post.orbital.to.PreoperculumB), sep='')) ,
                                   samplerC = c(       paste(min(sample99cnt$Upper.jaw.lengthC)," - ", max(sample99cnt$Upper.jaw.lengthC), sep=''),
                                                       paste(min(sample99cnt$InterOrbital.DistanceC)," - ", max(sample99cnt$InterOrbital.DistanceC), sep=''),
                                                       paste(min(sample99cnt$Snout.lengthC)," - ", max(sample99cnt$Snout.lengthC), sep=''),
                                                       paste(min(sample99cnt$Post.orbital.to.PreoperculumC)," - ", max(sample99cnt$Post.orbital.to.PreoperculumC), sep='')) ,
                                   males   =  c(       nrow(sample99cnt[sample99cnt$Sex=="M",]), nrow(sample99cnt[sample99cnt$Sex=="M",]), 
                                                       nrow(sample99cnt[sample99cnt$Sex=="M",]), nrow(sample99cnt[sample99cnt$Sex=="M",])) ,
                                   females =  c(       nrow(sample99cnt[sample99cnt$Sex=="F",]), nrow(sample99cnt[sample99cnt$Sex=="F",]), 
                                                       nrow(sample99cnt[sample99cnt$Sex=="F",]), nrow(sample99cnt[sample99cnt$Sex=="F",])),
                                   IAE.value        <- c(IAE.UJ,IAE.ID,IAE.SL,IAE.PP)
                                   ))

   kableExtra::kable(pilot.table, 
                     booktabs = TRUE, col.names = c("Head Dimension", "Min - Max (mm)", "Min - Max (mm)","Min - Max (mm)", "Males", "Females", "IAE"), 
                     linesep = "",
                     escape = F, 
                     align = c("l","c","c","c","c","c","l"),
                     format = "latex",  caption = "(ref:Table6Caption)") %>%
     
    add_header_above(c(" "= 1, "Sampler A" = 1, "Sampler B" = 1, "Sampler C" = 1, "Sex"=2, " " = 1 ), bold = T) %>% 
   
    kableExtra::kable_styling(font_size = 10, position = "left") %>%
                      row_spec(0, bold="true") %>%
                      column_spec(1, width  = "1.7cm") %>%
                      column_spec(2, width  = "2.2cm") %>%
                      column_spec(3, width  = "2.2cm") %>%
                      column_spec(4, width  = "2.2cm") %>%
                      column_spec(5, width  = "1.3cm") %>%
                      column_spec(6, width  = "1.3cm") %>% 
                      column_spec(7, width  = "1.3cm") 


```
\clearpage

